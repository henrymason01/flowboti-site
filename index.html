<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>FlowBotAI — AI Assistants that Convert Visitors</title>
  <meta name="description" content="FlowBotAI is your fully branded, 24/7 virtual assistant that answers customer questions, books calls, and qualifies leads."/>
  <link rel="icon" href="/logo.png" type="image/png"/>
  <link rel="apple-touch-icon" href="/logo.png"/>
  <link rel="stylesheet" href="/styles.css"/>
  <meta name="theme-color" content="#0b0d13"/>
</head>
<body>
  <!-- HEADER -->
  <header class="nav">
    <div class="container nav-inner-center">
      <a class="brand-center" href="#main">
        <img src="/logo.png" alt="FlowBotAI logo" class="brand-logo"/>
        <span class="brand-name">FlowBotAI</span>
      </a>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Your Website’s 24/7 Sales Teammate</h1>
          <p class="sub">Capture more enquiries while you sleep. A branded AI assistant that answers questions, books calls, and qualifies leads.</p>
          <div class="cta-row">
            <a href="#demo" class="btn btn-lg btn-primary">See it in Action</a>
            <a href="#contact" class="btn btn-lg btn-secondary">Contact Us</a>
          </div>
        </div>
      </div>
    </section>

    <!-- DEMO (robust embed with spinner + automatic fallbacks) -->
    <section id="demo" class="section alt">
      <div class="container">
        <h2 class="center">See your assistant in action</h2>
        <p class="center muted">Trained on your FAQs and brand voice. Ready to handle routine conversations with care.</p>

        <div style="display:flex;justify-content:center;align-items:center;min-height:560px;">
          <div id="webchat-card" style="position:relative;width:100%;max-width:900px;height:560px;background:#0b0d13;border-radius:16px;overflow:hidden;box-shadow:0 18px 50px rgba(0,0,0,.35);">

            <!-- Loading spinner / status -->
            <div id="webchat-status" style="position:absolute;inset:0;display:grid;place-items:center;z-index:2;color:#aab3cf;font:600 15px/1.4 Inter,system-ui,Arial,sans-serif;">
              <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
                <div style="width:36px;height:36px;border-radius:50%;border:3px solid rgba(255,255,255,.25);border-top-color:#6c83ff;animation:spin 1s linear infinite"></div>
                <span>Loading assistant…</span>
              </div>
            </div>

            <!-- Mount target (selector) -->
            <div id="webchat-card" style="position:relative;width:100%;max-width:900px;height:560px;background:#0b0d13;border-radius:16px;overflow:hidden;box-shadow:0 18px 50px rgba(0,0,0,.35);">
  <!-- Single, reliable iframe embed (no JS, no spinner) -->
  <div id="webchat" style="position:relative;width:100%;height:100%;">
    <iframe
      src="https://cdn.botpress.cloud/webchat/v3.2/shareable.html?configUrl=https://files.bpcontent.cloud/2025/08/10/00/20250810004526-MT792BNT.json"
      title="FlowBotAI Demo"
      style="position:absolute;inset:0;width:100%;height:100%;border:0;border-radius:16px;background:#0b0d13"
      allow="clipboard-read; clipboard-write; microphone; camera; autoplay; fullscreen"
      loading="eager"
    ></iframe>
  </div>
</div>

            <script>
              (function () {
                const status = document.getElementById('webchat-status');

                // 1) Minimal inline config (no external CSS URL)
                const cfg = {
                  botId: "0d7b480b-f1d5-4d28-943b-2e59f2d62c45",
                  clientId: "4ddde79d-08f5-4846-be15-1303066f19a7",
                  selector: "#webchat",
                  configuration: {
                    version: "v1",
                    botName: "FlowBot",
                    themeMode: "dark",
                    variant: "solid",
                    color: "#3276EA",
                    fontFamily: "inter",
                    radius: 4,
                    feedbackEnabled: false
                  }
                };

                function pinIntoCard() {
                  const host = document.getElementById('webchat');
                  const wc = document.querySelector('.bpWebchat');
                  if (!wc) return false;
                  if (host && wc.parentNode !== host) host.appendChild(wc);
                  Object.assign(wc.style, {
                    position: 'absolute',
                    inset: '0',
                    width: '100%',
                    height: '100%',
                    maxHeight: '100%',
                    borderRadius: '16px',
                    zIndex: '10'
                  });
                  return true;
                }

                // Try normal embed
                try {
                  window.botpress.init(cfg);
                  window.botpress.on('webchat:ready', () => {
                    // When JS widget is ready: pin it, open it, and HIDE iframe
                    pinIntoCard();
                    if (window.botpress.open) window.botpress.open();
                    const iframe = document.getElementById('bp-fallback');
                    if (iframe) iframe.style.display = 'none';
                    if (status) status.style.display = 'none';
                  });
                  // If it renders a bit later or re-renders, keep pinning
                  new MutationObserver(() => pinIntoCard()).observe(document.documentElement, { childList: true, subtree: true });
                } catch (e) {
                  console.error('Botpress init error:', e);
                }

                // Keep your timed message logic (unchanged)
                setTimeout(() => {
                  const hasBP = document.querySelector('.bpWebchat') || document.querySelector('#webchat iframe');
                  if (!hasBP && status) {
                    status.innerHTML =
                      '<div style="text-align:center;max-width:520px;padding:0 16px">' +
                        '<div style="margin-bottom:10px">We couldn’t load the assistant here.</div>' +
                        '<a href="https://cdn.botpress.cloud/webchat/v3.2/shareable.html?configUrl=https://flowbotai.co.uk/bp-config.json" ' +
                        'style="display:inline-block;padding:10px 16px;border-radius:10px;background:#6c83ff;color:#0b0d13;font-weight:800;text-decoration:none" target="_blank" rel="noopener">' +
                        'Open assistant in a new tab</a>' +
                        '<div style="margin-top:10px;font-size:13px;opacity:.8">Tip: if it opens in a new tab, a content blocker on this browser is preventing the embed.</div>' +
                      '</div>';
                  }
                }, 9000);
              })();
            </script>

            <style>
              /* Keep the bot inside the card; hide floating bubble */
              #webchat .bpWebchat {
                position: unset !important;
                width: 100% !important;
                height: 100% !important;
                max-height: 100% !important;
                max-width: 100% !important;
                border-radius: 16px !important;
              }
              #webchat .bpFab { display: none !important; }

              /* Neutralize stray overlays/backdrops that could cover the chat */
              .bpBackdrop, .bpOverlay, .bpPortal, .bpModal, .bpDrawer { display:none !important; }
              #demo::before, #demo::after { content:none !important; display:none !important; }

              /* spinner keyframes */
              @keyframes spin { to { transform: rotate(360deg); } }
            </style>

          </div>
        </div>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="section">
      <div class="container">
        <h2 class="center">How It Works</h2>
        <div class="grid-3">
          <article class="tile"><h3>1) Drop in the Snippet</h3><p>One line added to your site. No rebuild needed.</p></article>
          <article class="tile"><h3>2) Train on Your Content</h3><p>We learn from your site, docs, and past chats to match your tone.</p></article>
          <article class="tile"><h3>3) Go Live & Track Leads</h3><p>See conversations, booked calls, and qualified enquiries in one place.</p></article>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section">
      <div class="container">
        <h2 class="center">Contact Us</h2>
        <p class="center muted">Tell us about your business. We’ll reply within one working day.</p>
        <form id="contact-form" class="contact-form" action="https://formspree.io/f/mjkojepy" method="POST" novalidate>
          <input type="text" name="company_website" class="hp" tabindex="-1" autocomplete="off" aria-hidden="true" placeholder="Leave empty" />
          <label class="field"><span class="label">Full name</span><input type="text" name="full_name" required/><span class="error"></span></label>
          <label class="field"><span class="label">Business website</span><input type="url" name="website" placeholder="https://example.com" required/><span class="error"></span></label>
          <label class="field"><span class="label">Work email</span><input type="email" name="_replyto" required/><span class="error"></span></label>
          <label class="field"><span class="label">What should the assistant do?</span><textarea name="requirements" rows="6" required></textarea><span class="error"></span></label>
          <div class="cta-row form-ctas">
            <button type="submit" class="btn btn-full btn-lg btn-primary">Send</button>
          </div>
          <p class="contact-email-small center">Or email <a href="mailto:hello@flowbotai.co.uk">hello@flowbotai.co.uk</a></p>
          <p id="form-status" class="status" role="status" aria-live="polite"></p>
        </form>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container footer-inner">
      <span>© <span id="year"></span> FlowBotAI</span>
    </div>
  </footer>

  <script>
    // footer year
    const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();
  </script>

  <!-- Custom overrides -->
  <style>
    /* Make "Or email ..." bigger + white */
    .contact-email-small {
      font-size: 20px;
      color: #ffffff;
      margin-top: 20px;
    }
    .contact-email-small a {
      color: #ffffff;
      font-weight: 600;
      text-decoration: underline;
    }

    /* Smooth scrolling like Apple */
    html {
      scroll-behavior: smooth;
    }
  </style>
</body>
</html>
